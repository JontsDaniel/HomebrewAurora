<?xml version="1.0" encoding="utf-8"?>
<elements>
    <info>
        <update version="1.0.3">
            <file name="martir.xml" url="https://raw.githubusercontent.com/JontsDaniel/HomebrewAurora/main/classes/martir.xml" />
        </update>
    </info>
    
    <element name="Martir" type="Class" source="Felix Klaus" id="ID_FELIX_CLASS_MARTIR">
        <description>
            <p>O Mártir arrisca a própria vida por um bem maior, se colocando no lugar dos aliados e os protegendo através do próprio sofrimento.</p>
            <h4>CRIANDO UM MÁRTIR</h4>
            <p>Constituição deve ser seu atributo mais alto, seguido de Carisma e Força.</p>
        </description>
        <setters>
            <set name="hd">d12</set>
        </setters>
        <sheet display="false" />
        <rules>
            <grant type="Proficiency" id="ID_PROFICIENCY_ARMOR_PROFICIENCY_LIGHT_ARMOR" />
            <grant type="Proficiency" id="ID_PROFICIENCY_ARMOR_PROFICIENCY_MEDIUM_ARMOR" />
            <grant type="Proficiency" id="ID_PROFICIENCY_ARMOR_PROFICIENCY_HEAVY_ARMOR" />
            <grant type="Proficiency" id="ID_PROFICIENCY_ARMOR_PROFICIENCY_SHIELDS" />
            <grant type="Proficiency" id="ID_PROFICIENCY_WEAPON_PROFICIENCY_SIMPLE_WEAPONS" />
            <grant type="Proficiency" id="ID_PROFICIENCY_WEAPON_PROFICIENCY_MARTIAL_WEAPONS" />
            <grant type="Proficiency" id="ID_PROFICIENCY_SAVINGTHROW_CONSTITUTION" />
            <grant type="Proficiency" id="ID_PROFICIENCY_SAVINGTHROW_WISDOM" />
            
            <select type="Proficiency" name="Perícia (Martir)" supports="Skill" number="2" />

            <grant type="Class Feature" id="ID_FELIX_FEATURE_POCO_DE_SOFRIMENTO" level="1" />
            <grant type="Class Feature" id="ID_FELIX_FEATURE_SPELLCASTING" level="1" /> 
            <grant type="Class Feature" id="ID_FELIX_FEATURE_MAESTRIA" level="1" />

            <grant type="Class Feature" id="ID_FELIX_FEATURE_SACRIFICIO_ALTRUISTA" level="2" />
            <grant type="Class Feature" id="ID_FELIX_FEATURE_CANALIZAR_DIVINDADE" level="2" />
            <grant type="Class Feature" id="ID_FELIX_FEATURE_ESTILO_DE_LUTA" level="2" />

            <select type="Archetype" name="Fardo (Arquétipo)" supports="Martir" level="3" />

            <grant type="Class Feature" id="ID_FELIX_FEATURE_MARTIR_ASI" level="4" />

            <grant type="Class Feature" id="ID_FELIX_FEATURE_EXTRA_ATTACK" level="5" />

            <grant type="Class Feature" id="ID_FELIX_FEATURE_EMPATIA_DOLOROSA" level="6" />

            <grant type="Class Feature" id="ID_FELIX_FEATURE_MARTIR_ASI" level="8" />

            <grant type="Class Feature" id="ID_FELIX_FEATURE_INSPIRACAO_VINGATIVA" level="10" />

            <grant type="Class Feature" id="ID_FELIX_FEATURE_ADAPTACAO_RETALIATORIA" level="11" />

            <grant type="Class Feature" id="ID_FELIX_FEATURE_MARTIR_ASI" level="12" />

            <grant type="Class Feature" id="ID_FELIX_FEATURE_CADEIA_DE_PENITENCIA" level="14" />

            <grant type="Class Feature" id="ID_FELIX_FEATURE_MARTIR_ASI" level="16" />
            
            <grant type="Class Feature" id="ID_FELIX_FEATURE_O_MARTIR_FINAL" level="18" />

            <grant type="Class Feature" id="ID_FELIX_FEATURE_MARTIR_ASI" level="19" />
        </rules>
        
        <spellcasting name="Martir" ability="Charisma" prepare="true">
            <list>Magias de Martir</list>
        </spellcasting>
    </element>

    <element name="Aumento no Valor de Atributo" type="Class Feature" source="Felix Klaus" id="ID_FELIX_FEATURE_MARTIR_ASI">
        <description>
            <p>Você pode aumentar um valor de atributo à sua escolha em 2 ou dois valores de atributo à sua escolha em 1. Como padrão, você não pode elevar um valor de atributo acima de 20 com essa característica.</p>
        </description>
        <sheet display="false" />
        <rules>
            <select type="Class Feature" name="Aumento no Valor de Atributo" supports="Ability Score Improvement" />
        </rules>
    </element>

    <element name="Ataque Extra" type="Class Feature" source="Felix Klaus" id="ID_FELIX_FEATURE_EXTRA_ATTACK">
        <description>
            <p>A partir do 5º nível, você pode atacar duas vezes, ao invés de uma, sempre que realizar a ação de Ataque no seu turno.</p>
        </description>
        <sheet>
            <description>Ataca duas vezes com ação de Ataque.</description>
        </sheet>
        <rules>
            <stat name="extra attack:count" value="1" level="5" bonus="extra attack" />
        </rules>
    </element>

    <element name="Maestria em Armas" type="Class Feature" source="Felix Klaus" id="ID_FELIX_FEATURE_MAESTRIA">
        <description><p>Treinamento em armas complexas.</p></description>
        <sheet><description>Possui Maestria em Armas.</description></sheet>
    </element>

    <element name="Poço de Sofrimento" type="Class Feature" source="Felix Klaus" id="ID_FELIX_FEATURE_POCO_DE_SOFRIMENTO">
        <description>
            <p>Armazena cura baseada no dano sofrido.</p>
        </description>
        <sheet>
            <description>Reserva: {{martir:poco}}. Ganha metade do dano sofrido.</description>
        </sheet>
        <rules>
            <stat name="martir:poco" value="level:martir" />
            <stat name="martir:poco" value="level:martir" />
            <stat name="martir:poco" value="level:martir" />
            <stat name="martir:poco" value="level:martir" />
            <stat name="martir:poco" value="level:martir" />
            <stat name="martir:poco" value="level:martir" />
            <stat name="martir:poco" value="level:martir" />
            <stat name="martir:poco" value="level:martir" />
            <stat name="martir:poco" value="level:martir" />
            <stat name="martir:poco" value="level:martir" />
        </rules>
    </element>

    <element name="Conjuração" type="Class Feature" source="Felix Klaus" id="ID_FELIX_FEATURE_SPELLCASTING">
        <sheet display="false" />
        <spellcasting name="Martir" ability="Charisma" prepare="true" allowReplace="true">
            <list>Magias de Martir</list>
        </spellcasting>
    </element>

    <element name="Sacrifício Altruísta" type="Class Feature" source="Felix Klaus" id="ID_FELIX_FEATURE_SACRIFICIO_ALTRUISTA">
        <sheet action="Reaction" usage="{{sacrificio:usage}}/Descanso Curto">
            <description>Sofre dano no lugar de aliado a 18m.</description>
        </sheet>
        <rules>
            <stat name="sacrificio:usage" value="1" />
            <stat name="sacrificio:usage" value="charisma:modifier" />
        </rules>
    </element>

    <element name="Canalizar Divindade" type="Class Feature" source="Felix Klaus" id="ID_FELIX_FEATURE_CANALIZAR_DIVINDADE">
        <sheet usage="1/Descanso Curto" />
        <rules>
            <grant type="Class Feature" id="ID_FELIX_CD_FLAGELACAO_ARCANA" />
            <grant type="Class Feature" id="ID_FELIX_CD_FLAGELACAO_CURATIVA" />
        </rules>
    </element>

    <element name="CD: Flagelação Arcana" type="Class Feature" source="Felix Klaus" id="ID_FELIX_CD_FLAGELACAO_ARCANA">
        <sheet action="Bonus Action"><description>Cria slot gastando vida.</description></sheet>
    </element>

    <element name="CD: Flagelação Curativa" type="Class Feature" source="Felix Klaus" id="ID_FELIX_CD_FLAGELACAO_CURATIVA">
        <sheet action="Action"><description>Cura aliado gastando própria vida.</description></sheet>
    </element>

    <element name="Estilo de Luta" type="Class Feature" source="Felix Klaus" id="ID_FELIX_FEATURE_ESTILO_DE_LUTA">
        <rules><select type="Class Feature" name="Estilo de Luta" supports="Fighting Style" /></rules>
    </element>

    <element name="Empatia Dolorosa" type="Class Feature" source="Felix Klaus" id="ID_FELIX_FEATURE_EMPATIA_DOLOROSA">
        <sheet action="Action"><description>Transfere condição de aliado para si.</description></sheet>
    </element>

    <element name="Inspiração Vingativa" type="Class Feature" source="Felix Klaus" id="ID_FELIX_FEATURE_INSPIRACAO_VINGATIVA">
        <sheet><description>Aliados ganham +{{charisma:modifier}} dano contra quem te feriu.</description></sheet>
    </element>

    <element name="Adaptação Retaliatória" type="Class Feature" source="Felix Klaus" id="ID_FELIX_FEATURE_ADAPTACAO_RETALIATORIA">
        <sheet><description>Resistência ao dano sofrido até o próximo turno.</description></sheet>
    </element>

    <element name="Cadeia de Penitência" type="Class Feature" source="Felix Klaus" id="ID_FELIX_FEATURE_CADEIA_DE_PENITENCIA">
        <sheet usage="1/Descanso Longo"><description>Reflete dano como psíquico.</description></sheet>
    </element>

    <element name="O Mártir" type="Class Feature" source="Felix Klaus" id="ID_FELIX_FEATURE_O_MARTIR_FINAL">
        <sheet action="Action"><description>Morre para reviver aliado full HP.</description></sheet>
    </element>

    <element name="Fardo da Misericórdia" type="Archetype" source="Felix Klaus" id="ID_FELIX_ARCHETYPE_MISERICORDIA">
        <supports>Martir</supports>
        <rules>
            <grant type="Spell" id="ID_PHB_SPELL_HEALING_WORD" level="1" spellcasting="Martir" prepared="true" />
            <grant type="Spell" id="ID_PHB_SPELL_SANCTUARY" level="1" spellcasting="Martir" prepared="true" />
            <grant type="Class Feature" id="ID_FELIX_FEATURE_PIEDADE_COMPASSIVA" level="3" />
        </rules>
    </element>
    <element name="Piedade Compassiva" type="Class Feature" source="Felix Klaus" id="ID_FELIX_FEATURE_PIEDADE_COMPASSIVA">
        <sheet><description>HP Temp ao poupar inimigo.</description></sheet>
    </element>

    <element name="Fardo da Justiça" type="Archetype" source="Felix Klaus" id="ID_FELIX_ARCHETYPE_JUSTICA">
        <supports>Martir</supports>
        <rules>
            <grant type="Spell" id="ID_PHB_SPELL_BANE" level="1" spellcasting="Martir" prepared="true" />
            <grant type="Spell" id="ID_PHB_SPELL_HUNTERS_MARK" level="1" spellcasting="Martir" prepared="true" />
            <grant type="Class Feature" id="ID_FELIX_FEATURE_RETRIBUICAO_JUSTICA" level="3" />
        </rules>
    </element>
    <element name="Retribuição" type="Class Feature" source="Felix Klaus" id="ID_FELIX_FEATURE_RETRIBUICAO_JUSTICA">
        <sheet><description>Dano fixo ao usar Sacrifício.</description></sheet>
    </element>

    <element name="Fardo da Punição" type="Archetype" source="Felix Klaus" id="ID_FELIX_ARCHETYPE_PUNICAO">
        <supports>Martir</supports>
        <rules>
            <grant type="Spell" id="ID_PHB_SPELL_BANE" level="1" spellcasting="Martir" prepared="true" />
            <grant type="Spell" id="ID_PHB_SPELL_HELLISH_REBUKE" level="1" spellcasting="Martir" prepared="true" />
            <grant type="Class Feature" id="ID_FELIX_FEATURE_AUTOLESÃO_REDENTORA" level="3" />
        </rules>
    </element>
    <element name="Autolesão Redentora" type="Class Feature" source="Felix Klaus" id="ID_FELIX_FEATURE_AUTOLESÃO_REDENTORA">
        <sheet action="Action"><description>Autolesão enche o Poço.</description></sheet>
    </element>
    
    <element name="Fardo da Redenção" type="Archetype" source="Felix Klaus" id="ID_FELIX_ARCHETYPE_REDENCAO">
        <supports>Martir</supports>
        <rules>
            <grant type="Spell" id="ID_PHB_SPELL_SANCTUARY" level="1" spellcasting="Martir" prepared="true" />
            <grant type="Spell" id="ID_PHB_SPELL_SLEEP" level="1" spellcasting="Martir" prepared="true" />
            <grant type="Class Feature" id="ID_FELIX_FEATURE_REPARACAO_ERRO" level="3" />
        </rules>
    </element>
    <element name="Reparação do Erro" type="Class Feature" source="Felix Klaus" id="ID_FELIX_FEATURE_REPARACAO_ERRO">
        <sheet usage="{{charisma:modifier}}/Descanso Curto"><description>Vantagem após erro.</description></sheet>
    </element>

    <element name="Magias de Martir" type="Spell List" source="Felix Klaus" id="ID_FELIX_SPELL_LIST_MARTIR">
        <grant id="ID_PHB_SPELL_BLESS" level="1" />
        <grant id="ID_PHB_SPELL_COMMAND" level="1" />
        <grant id="ID_PHB_SPELL_CURE_WOUNDS" level="1" />
        <grant id="ID_PHB_SPELL_AID" level="2" />
        <grant id="ID_PHB_SPELL_LESSER_RESTORATION" level="2" />
        <grant id="ID_PHB_SPELL_REVIVIFY" level="3" />
        <grant id="ID_PHB_SPELL_DEATH_WARD" level="4" />
        <grant id="ID_PHB_SPELL_RAISE_DEAD" level="5" />
    </element>
</elements>
